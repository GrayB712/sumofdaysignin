<!DOCTYPE html>
<html>
<center>
<head>
<p style="font-family:Arial;color:green; font-size:20px" id="errors">
</p>
</head>
<body onload="dispKey()">

<input id="passcode" cols="20" rows="5" style="width:300px; height:40px" placeholder="Paste your sign in code here"></input>

<p id="p1" style="color:green"></p>
<p>

</p>
<button onclick="checkPassword()" style="background:darkblue; color:white; border-radius:10px; width:90px; height:40px">Submit</button>
<br>
  <p style="font-family:Arial; font-size:20px">OR</p>
  <br>
  <button href="https://pentasyllabic-nozzl.000webhostapp.com/" style="color:white; bacground:darkblue; border-radius:10px; width:150px; height:40px">Create an Account</button>
<script>


function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function dispKey() {
   //setCookie("key", "034jf", 5);
   const oldString = getCookie("key");
   if(oldString != null)
   {
      document.getElementById("errors").innerHTML="Actually, nevermind. You are already signed in!";
   }
}

function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/; domain=grayb712.github.io"}
      const keys = ["jmKf5", "dWgd5"];

      
      function checkPassword(){
        
        var str = document.getElementById("passcode").value;
        var lastCharfive = str.at(-5);
        var lastCharfour = str.at(-4);
        var lastCharthree = str.at(-3);
        var lastChartwo = str.at(-2);
        var lastCharone = str.at(-1);
        var isKey = 0;
        const lastChars = lastCharfive + lastCharfour + lastCharthree + lastChartwo + lastCharone;
        //document.getElementById("p1").innerHTML = lastChars;
        for (let i = 0; i < (keys.length + 1); i++) {
          if(keys[i] === lastChars){
            
            document.getElementById("p1").innerHTML = "Success! You can now add summaries!";
            //document.cookie = `key=${str}`;
            //document.cookie = "key="+str;
            setCookie("key", str, 5);
            const newString = getCookie("key");
            //document.getElementById("errors").innerHTML=newString;
            isKey = 1;            
            }
        }
        if(isKey === 0) {
        document.getElementById("passcode").placeholder="Wrong code!";
        document.getElementById("passcode").innerHTML="";
        document.getElementById("passcode").value="";
        }


}


    </script>
<p id="success" style="color:green"></p>
</body>
</center>
</html>
